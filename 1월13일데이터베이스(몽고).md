서버접속 wps

> 몽고db

$ sudo apt update -y

$ sudo apt upgrade -y

$ sudo apt autoremove libdumnet1

다시 # sudo apt upgratde -y

$ sudo apt install -y mongodb

password랑 외부접속가능하게 하는 설정

$ sudo vi /etc/mongodb.conf

들어가서 bind_ip = 0.0.0.0으로 수정(기존껀주석표시)

auth = true를 주석제거



user wps

db.user.insert / user는 테이블,컬렉션



데이터 삭제

db.dropDatabase()



| mysql | mongodb    |
| ----- | ---------- |
| table | collection |
| row   | document   |



capped(저장공간설정)

wps에서 쉘열기

db.createCollection("infor1", { autoIndexId: true, } capped:true, size=500, max:5)

db.createCollection("infor2", { autoIndexId: true, } capped:true, size=0, max:5)





db.articles.insert({"title":wps, "content":mongo})

show.collections / 컬렉션확인

db.articles.drop() / 삭제





document 추가

db.info1.insert({"subject": "python", "level":3})

db.info1.insert({"subject": "web", "level":1})

db.info1.insert({"subject": "sql1", "level":2})





db.info1.insert({

{"subject": "python", "level":3}

{"subject": "web", "level":1}

{"subject": "sql1", "level":2}

{"subject": "python", "level":3}

{"subject": "web", "level":1}

{"subject": "sql1", "level":2}

})



db.info.insert({

{"subject": "python", "level":3}

{"subject": "web", "level":1}

{"subject": "sql1", "level":2}

{"subject": "python", "level":3}

{"subject": "web", "level":1}

{"subject": "sql1", "level":2}

})

// document삭제

db.info.remove( {level:2} )

// document검색

db.collection.find(query, projection)

// projection : 보여지는 컬럼을 지정

db.info.find()

db.info.find( { subject:"python" } )



// 비교연산자로 검색

db.info.find( { level: {$lte: 2} } ) // 레벨2이하를 검색

db.info.find( { subject: {$in: ["web", "python"]} } )



// 논리연산자로 검색

// or, and, not, nor

//파이썬 이면서 레벵이 1이하인 데이터 검색

db.info.find( { $and:[ {"subjects": "pyhton"}, {"level": {$lte:1}} ]} )

db.info.find( {$where: "this.level == 1"} )



// projection

// _id는 false를 쓰지 않으면 무조건 true 입니다.

db.info.find({}, {"_id:": false, "level": false})

db.info.find({}, {"_id:": false, "level": true})



// 함수들

db.info.find().sort({level:1}) // 오름차순정렬, -1로 적어주면 내림차순정렬



// limit

db.info.find().sort({level:-1}).limit(3) // 3개만 나옴

db.info.find().skip(3) // 위의 3개의 데이터를 제외하고 나옴



// update

// upsert: 데이터가 있으면 업데이트,없으면 insert



db.info.find()

db.info.update(

{"subject": "web"},

{"subject": "sass", "level": 2},

{"upsert": true}

)



db.info.update(

{"subjects": "sass"},

{$upset: {level:1}}

)



db.info.update(

{level:{$exists:false}},

{$set: {level:2}},

{multi:1}

)

db.info.find()





var showSkip = function(start){

return db.info.find().skip(start)

}



var showPage = function(pageBlock, page){

return db.info.find().skip((page-1)*pageBlock).limit(pageBlock)

}



showPage(3, 2)